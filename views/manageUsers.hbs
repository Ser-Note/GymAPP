<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#3498db">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/x-icon" href="/photos/polarbear_head.ico">
    <link rel="apple-touch-icon" href="/photos/polarbear_head.svg">
    <link rel="stylesheet" href="/css/theme.css">
    <link rel="stylesheet" href="/css/navbar.css">
    <link rel="stylesheet" href="/css/manageUsers.css">
    <script src="./js/frontManageUsers.js" defer></script>
	<script src="/js/theme.js" defer></script>
    <title>Manage Users</title>
</head>
<body>
    
        <div id="winterSnowContainer"></div>

        <ul class="info">
            <div class="header-margin">
                <img src="./photos/polarbear_dumbellCurl.svg" alt="Polar Bear Logo" class="logo">
            </div>
            <h1>{{title}}</h1>

            <!-- Tab Navigation -->
            <div class="tab-navigation">
                <button class="tab-btn active" data-tab="users-tab">Manage Users</button>
                <button class="tab-btn" data-tab="exercises-tab">
                    Pending Exercises
                    {{#if pendingExercises}}
                    <span class="badge">{{pendingExercises.length}}</span>
                    {{/if}}
                </button>
            </div>

            <!-- Users Tab -->
            <div id="users-tab" class="tab-content active">
                <label for="userSearchInput">Search Users</label>
                <input type="text" id="userSearchInput" placeholder="Search users..." aria-label="Search users">
                <button id="userSearchButton" aria-label="Search users">Search</button>

                {{#each users}}
              
                    <li class="user-item">
                        <div class="user-header">
                            <div class="user-id">
                                <img src="./photos/avatar.svg" alt="{{this.user_name}} avatar" class="avatar">
                                <strong>{{this.user_name}}</strong>
                            </div>
                            <button class="btn-toggle-options" aria-expanded="true" aria-label="Toggle options for {{this.user_name}}">
                                <span>⋮</span>
                            </button>
                        </div>
                        <div class="user-options collapsed">
                            {{#if this.isAuthenticated}}
                            <button class="btn-user-action btnAuthActive">Active</button>
                            {{else}}
                            <button class="btn-user-action btnAuthPending">Pending</button>
                            {{/if}}
                                {{#unless this.isAdmin}}
                                    {{#if this.isAdmin}}
                                        
                                    <button class="btn-user-action admin-badge">Admin</button>
                                    {{else}}
                                    <button class="btn-user-action user-badge">User</button>
                                        
                                    {{/if}}
                                {{/unless}}
                            <button class="btn-user-action btnDeleteUser">Delete</button>
                            <button class="btn-user-action btnEditWorkout">Edit/Auth</button>
                        </div>
                    </li>
                
            {{/each}}
            </div>

            <!-- Exercises Tab -->
            <div id="exercises-tab" class="tab-content">
                {{#if pendingExercises}}
                    {{#if pendingExercises.length}}
                        <p class="exercise-info">Total pending exercises: <strong>{{pendingExercises.length}}</strong></p>
                        <ul class="exercises-list">
                            {{#each pendingExercises}}
                            <li class="exercise-item" data-exercise-id="{{this.id}}">
                                <div class="exercise-header">
                                    <div class="exercise-details">
                                        <h3 class="exercise-name">{{this.exercise_name}}</h3>
                                        <p class="exercise-muscle">
                                            <strong>Target:</strong> {{this.target_muscle}}
                                            {{#if this.specific_muscle}}
                                            <span class="specific-muscle"> • {{this.specific_muscle}}</span>
                                            {{/if}}
                                        </p>
                                        <p class="exercise-creator">
                                            <strong>Created by:</strong> {{#if this.user}}{{this.user.user_name}}{{else}}Unknown User{{/if}}
                                        </p>
                                        {{#if this.created_at}}
                                        <p class="exercise-date">
                                            <strong>Date:</strong> {{this.created_at}}
                                        </p>
                                        {{/if}}
                                    </div>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn-exercise-action approve-exercise" data-exercise-id="{{this.id}}">Approve</button>
                                    <button class="btn-exercise-action reject-exercise" data-exercise-id="{{this.id}}">Reject</button>
                                </div>
                            </li>
                            {{/each}}
                        </ul>
                    {{else}}
                        <p class="no-exercises">No pending exercises to review.</p>
                    {{/if}}
                {{else}}
                    <p class="no-exercises">No pending exercises to review.</p>
                {{/if}}
            </div>

        <nav class="nav-bar">
            <div class="nav-track">
                <a class="nav-link nav-profile" href="/profile">
                    <img class="nav-icon" src="/photos/avatar.svg" alt="Profile">
                    <span>Profile</span>
                </a>
                <a class="nav-link" href="/manageUsers">
                    <img class="nav-icon" src="/photos/admin.svg" alt="Manage Users">
                    <span>Manage Users</span>
                </a>
                <a class="nav-link nav-home" href="/dashboard">
                    <img class="nav-icon" src="/photos/home.svg" alt="Home">
                    <span>Home</span>
                </a>
                <a class="nav-link nav-workout" href="/myWorkouts">
                    <img class="nav-icon" src="/photos/polarbear_head.svg" alt="My Workout">
                    <span>My Workout</span>
                </a>
            </div>
        </nav>
</body>
</html>